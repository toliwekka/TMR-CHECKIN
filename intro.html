<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>NFT Toli Wekka | T|Check Assessment</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href="themes.css" />
        <link rel="stylesheet" href="introstyles.css" />
    </head>
    <body>
        <!-- Main content area -->
        <div class="page-wrapper">
            <div class="theme-switcher">
                <select id="themeSelect" class="form-select">
                    <option value="default" selected> <img src="path/to/tmr-logo.png" alt="TMR Fresh Logo" style="width: 20px; vertical-align: middle; margin-right: 8px; display: inline-block;" /> TMR </option>
                    <option value="fieryRed">ðŸ”¥ Fiery Red</option>
                    <option value="blushRose">ðŸŒ¸ Blush Rose</option>
                    <option value="midnightDark">ðŸŒš Midnight Dark</option>
                    <option value="sereneLavender">ðŸ’œ Serene Lavender</option>
                    <option value="oceanBreeze">ðŸŒŠ Ocean Breeze</option>
                    <option value="goldenSunset">ðŸŒ… Golden Sunset</option>
                    <option value="softStone">ðŸª¶ Soft Stone</option>
                    <option value="softBlush">ðŸ’– Soft Blush</option>
                </select>
            </div>

            <div id="landingPage" class="container">
                <h1 class="text-center mb-4" style="color: var(--primary); font-weight: 700;">The NFT T|Check Mental Wellness Revolution!</h1>

                <div class="hero-section">
                    <p id="hero-description-dynamic" class="hero-description-dynamic">Starting your wellness transformation with T|Check...</p>
                </div>

                <div class="pane">
                    <div id="consent-card" class="card text-center card-button" role="button" tabindex="0" aria-pressed="false">
                        <div class="card-icon"><i class="bi bi-emoji-smile"></i></div>
                        <h3>Step 1: Consent</h3>
                        <p>
                            Learn what the process entails and why your consent matters. We respect your autonomy and privacy at every step.
                        </p>
                    </div>

                    <!-- Step 2 -->
                    <div class="card text-center card-button" role="button" tabindex="0" aria-pressed="false" data-disabled="true">
                        <div class="card-icon"><i class="bi bi-clipboard-data"></i></div>
                        <h3>Step 2: Assessment</h3>
                        <p>
                            Engage with the dynamic T|Check assessment experience designed to empower you through clarity and self-awareness.
                        </p>
                    </div>

                    <!-- Step 3 -->
                    <div class="card text-center card-button" role="button" tabindex="0" aria-pressed="false" data-disabled="true">
                        <div class="card-icon"><i class="bi bi-bar-chart-line"></i></div>
                        <h3>Step 3: Insights</h3>
                        <p>
                            Discover tailored insights into your mental well-being with beautifully crafted visualizations and improvement strategies.
                        </p>
                    </div>

                    <style>
                        .card-button {
                            cursor: pointer;
                            transition: transform 0.2s, box-shadow 0.2s;
                            outline: none;
                        }

                        .card-button:hover,
                        .card-button:focus {
                            transform: scale(1.02);
                            box-shadow: 0 0 0 3px var(--primary-light);
                        }

                        .card-button:active {
                            transform: scale(0.98);
                        }
                    </style>
                </div>
            </div>
        </div>
        <!-- FULLSCREEN IFRAME -->
        <div id="iframeContainer" class="fullscreen-iframe">
            <iframe id="assessmentIframe" src="register.html" allowfullscreen></iframe>
        </div>

        <footer class="sticky-footer">
            <p>
                &copy; NFT Consult | Powered by Toli Wekka. All rights reserved. |
                <a href="#">Privacy</a>
                |
                <a href="#">Terms</a>
            </p>
        </footer>

        <script src="themes.js"></script>

        <!-- SCRIPT -->
        <script>
            function openIframe() {
                document.getElementById("iframeContainer").style.display = "block";
                document.getElementById("landingPage").style.display = "none";
            }

            function closeIframe() {
                document.getElementById("iframeContainer").style.display = "none";
                document.getElementById("landingPage").style.display = "block";
            }

            document.addEventListener("DOMContentLoaded", () => {
                const consentCard = document.getElementById("consent-card");

                consentCard.addEventListener("click", openIframe);
            });
        </script>

        <script>
            // Dynamic Hero Description Rotation
            const heroDescriptions = [
                "Start your T|Check journey today â€” because your mind matters.",
                "NFT Consult proudly presents a smarter approach to self-discovery.",
                "Get a personalized mental wellness snapshot, powered by T|Check.",
                "Take the leap. T|Check helps decode what you feel.",
                "Mental clarity starts here. Welcome to NFT Toli Wekka.",
                "Insightful. Empowering. Yours. Try T|Check now.",
                "NFT Consult bridges you to deeper personal growth.",
                "Feel balanced, feel heard â€” T|Check is the start.",
                "Explore yourself, one question at a time.",
                "You are more than your stress. Let T|Check reveal the rest.",
            ];

            let heroIndex = 0;
            const heroEl = document.getElementById("hero-description-dynamic");

            setInterval(() => {
                heroEl.style.opacity = 0;
                setTimeout(() => {
                    heroEl.textContent = heroDescriptions[heroIndex];
                    heroEl.style.opacity = 1;
                    heroIndex = (heroIndex + 1) % heroDescriptions.length;
                }, 500);
            }, 5000);

            let currentTheme = localStorage.getItem("theme") || "default";
            const themeSelect = document.getElementById("themeSelect");

            function applyTheme(themeName) {
                const theme = themes[themeName];
                if (!theme) return;

                // Apply CSS variables
                Object.keys(theme).forEach((key) => {
                    document.documentElement.style.setProperty(key, theme[key]);
                });

                // Adjust text color based on --primary-dark
                setHeroDescriptionTextColor();

                // Store and sync
                localStorage.setItem("theme", themeName);
                currentTheme = themeName;

                // Broadcast to all iframes
                document.querySelectorAll("iframe").forEach((iframe) => {
                    iframe.contentWindow?.postMessage({ theme: themeName }, "*");
                });
            }

            function getComputedCSSVar(variable) {
                return getComputedStyle(document.documentElement).getPropertyValue(variable).trim();
            }

            function getLuminance(hex) {
                const rgb = hex
                    .replace("#", "")
                    .match(/.{2}/g)
                    .map((x) => parseInt(x, 16) / 255);
                const lum = rgb.map((c) => (c <= 0.03928 ? c / 12.92 : ((c + 0.055) / 1.055) ** 2.4));
                return 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];
            }

            function setHeroDescriptionTextColor() {
                const bg = getComputedCSSVar("--primary-dark");
                if (!bg || !bg.startsWith("#")) return;
                const luminance = getLuminance(bg);
                const color = luminance > 0.5 ? "#111" : "#fff";
                const heroDesc = document.querySelector(".hero-description");
                if (heroDesc) heroDesc.style.color = color;
            }

            // Handle messages from parent or other sources
            window.addEventListener("message", (event) => {
                if (event.data?.theme && themes[event.data.theme]) {
                    applyTheme(event.data.theme);
                    if (themeSelect) themeSelect.value = event.data.theme;
                }
            });

            document.addEventListener("DOMContentLoaded", () => {
                // Initial theme setup
                applyTheme(currentTheme);
                if (themeSelect) themeSelect.value = currentTheme;

                // Re-broadcast theme after short delay (for iframes loading late)
                setTimeout(() => {
                    document.querySelectorAll("iframe").forEach((iframe) => {
                        iframe.contentWindow?.postMessage({ theme: currentTheme }, "*");
                    });
                }, 500);

                // Theme dropdown handler
                if (themeSelect) {
                    themeSelect.addEventListener("change", (e) => {
                        applyTheme(e.target.value);
                    });
                }
            });
        </script>
    </body>
</html>
